!function(t){"use strict";function s(t,s){if(!t)throw new Error("No selector");if(t.length>0)throw new Error("Selector is an array");for(var i=0;i<a.length;i++)if(a[i]===t)throw new Error("Already init");this.$s=t,this.args={btnPrev:"ffs_prev",btnNext:"ffs_next",items:"ffs_i",currentClass:"ffs_i-current",showPrevClass:"ffs_i-showPrev",showNextClass:"ffs_i-showNext",hidePrevClass:"ffs_i-hidePrev",hideNextClass:"ffs_i-hideNext",infinite:!0,keys:!0},this.args=n(this.args,s),this.event=null,this.items=Array.prototype.slice.call(this.$s.querySelectorAll(" ."+this.args.items)),this.nb=this.items.length-1,this.idx=this.items.indexOf(this.$s.querySelector(" ."+this.args.currentClass)),this.btnPrev=this.$s.querySelector(" ."+this.args.btnPrev),this.btnNext=this.$s.querySelector(" ."+this.args.btnNext),this.bindEvts(),this.addEvt(),this.$s.setAttribute("tabindex",-1),this.idx<0&&(this.idx=0,e(this.items[this.idx],this.args.currentClass));var r=this;setTimeout(function(){r.event.detail.current=r.idx,r.$s.dispatchEvent(r.event)},0)}function i(t){return t?document.querySelectorAll("."+t):void 0}function e(t,s){t&&(t.className=t.className.replace(/\s+$/gi,"")+" "+s)}function r(t,s){t&&(t.className=t.className.replace(s,""))}function n(t,s){var i,e={};for(i in t)e[i]=t[i];for(i in s)e[i]=s[i];return e}function h(t,s){s=s||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,s.bubbles,s.cancelable,s.detail),i}var a=[],o=s.prototype;o.updateBtns=function(){(this.btnPrev||this.btnNext)&&(this.idx===this.nb&&this.args.infinite!==!0?this.btnNext.setAttribute("disabled","disabled"):0===this.idx&&this.args.infinite!==!0&&this.btnPrev.setAttribute("disabled","disabled"))},o.removeAttrs=function(){r(this.items[this.idx],this.args.currentClass),r(i(this.args.hidePreviousClass)[0],this.args.hidePreviousClass),r(i(this.args.hideNextClass)[0],this.args.hideNextClass),r(i(this.args.showPreviousClass)[0],this.args.showPreviousClass),r(i(this.args.showNextClass)[0],this.args.showNextClass),(this.btnPrev||this.btnNext)&&(this.btnPrev.removeAttribute("disabled"),this.btnNext.removeAttribute("disabled"))},o.goTo=function(t){if(t!==this.idx){if(this.args.infinite&&-1===t)t=this.nb-1;else if(t>this.nb||0>t)return;this.removeAttrs(),e(this.items[this.idx],t>this.idx?this.args.hidePreviousClass:this.args.hideNextClass),e(this.items[t],this.args.currentClass+" "+(t>this.idx?this.args.showNextClass:this.args.showPreviousClass)),this.idx=t,this.updateBtns(),this.event.detail.current=this.idx,this.$s.dispatchEvent(this.event)}},o.prev=function(){this.args.infinite&&0===this.idx?this.goTo(this.nb):this.goTo(this.idx-1)},o.next=function(){this.idx>=this.nb&&this.args.infinite?this.goTo(0):this.goTo(this.idx+1)},o.bindEvts=function(){a.push(this.$s);var t=this;this.btnPrev&&this.btnPrev.addEventListener("click",function(s){s.preventDefault(),t.prev()}),this.btnNext&&this.btnNext.addEventListener("click",function(s){s.preventDefault(),t.next()}),this.args.keys&&(this.$s.onkeydown=function(s){switch(s.keyCode){case 37:t.prev();break;case 39:t.next()}})},o.on=function(t,s){this.$s.addEventListener(t,function(t){return s(t)},!1)},o.addEvt=function(){var t=this;this.event=new h("change",{detail:{slider:t.$s,current:Number(t.idx)},bubbles:!0,cancelable:!0})},h.prototype=window.CustomEvent.prototype,window.CustomEvent=h,t.ffslider=s}(this);